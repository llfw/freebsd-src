# le-fay.org standard kernel for amd64

cpu		HAMMER
ident		LF

include "../../conf/std.nodebug"
include "../../conf/std.lf"

makeoptions	DEBUG=-g		# Build kernel with gdb(1) debug symbols
#makeoptions	WITH_CTF=1		# Run ctfconvert(1) for DTrace support

options 	HWPMC_HOOKS

# General amd64-specific options (MI options should go in std.lf).
device		acpi
device		acpi_wmi
options		IOMMU
options		PCI_IOV
device		pci
device		uart
device		efirt
device		aesni
device		rdrand_rng
device		cpufreq
device		amdtemp
device		amdsmn
device		cxgbe
device		ahci
device		mps
device		intpm
device		smbus
device		iicbus
device		iicbb
device		iic
device		ic
device		iicsmb
device		cpuctl
device		scbus
device		da

# USB
device		usb
device		usbhid
device		ohci
device		uhci
device		ehci
device		xhci
device		ukbd
device		hkbd
device		ums
device		umass

# LinuxKPI requires firmware
device		firmware

# System console
device		vt
device		vt_efifb
device		kbdmux
options		EVDEV_SUPPORT
options		KBD_INSTALL_CDEV
# evdev has to be in the kernel when EVDEV_SUPPORT is set or the build fails
device		evdev

# Xen domU support
options		XENHVM
device		xenefi
device		xenpci
device		xentimer

# AT keyboard, for dryad
device		atkbd
device		atkbdc

# VirtIO for bhyve/kvm guests
options		P9FS
device		virtio
device		virtio_pci
device		virtio_p9fs
device		virtio_blk
device		virtio_scsi
device		virtio_balloon
device		vtnet

