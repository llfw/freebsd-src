# le-fay.org standard kernel - based on MINIMAL

cpu		HAMMER
ident		LF

include "../../conf/std.nodebug"

makeoptions	DEBUG=-g		# Build kernel with gdb(1) debug symbols
makeoptions	WITH_CTF=1		# Run ctfconvert(1) for DTrace support

options 	SMP
options 	SCHED_ULE
options 	PREEMPTION
options 	INET
options 	INET6
options		TCP_OFFLOAD
options 	SCTP_SUPPORT		# Allow kldload of SCTP
options		VIMAGE
options 	GEOM_LABEL		# Provides labelization
# COMPAT_FREEBSD32 is required for linux.ko which is required for poudriere
options		COMPAT_FREEBSD32
# COMPAT_FREEBSD11 is required for Go
options 	COMPAT_FREEBSD11	# Compatible with FreeBSD11
options 	COMPAT_FREEBSD12	# Compatible with FreeBSD12
options 	COMPAT_FREEBSD13	# Compatible with FreeBSD13
options 	COMPAT_FREEBSD14	# Compatible with FreeBSD14
options 	SCSI_DELAY=1000
options 	KTRACE
options 	STACK
options 	_KPOSIX_PRIORITY_SCHEDULING
options 	PRINTF_BUFR_SIZE=128
options 	HWPMC_HOOKS
options 	AUDIT
options 	CAPABILITY_MODE		# Capsicum capability mode
options 	CAPABILITIES		# Capsicum capabilities
options 	MAC			# TrustedBSD MAC Framework
options 	KDTRACE_FRAME		# Ensure frames are compiled in
options 	KDTRACE_HOOKS		# Kernel DTrace hooks
options 	DDB_CTF			# Kernel ELF linker loads CTF data
options 	INCLUDE_CONFIG_FILE
options		SOFTUPDATES
options		UFS_ACL
options		UFS_DIRHASH

# IPSEC_SUPPORT requires device crypto
device		crypto
options		IPSEC_SUPPORT

options 	KDB
options 	KDB_TRACE
options 	KDB_UNATTENDED
options		ALT_BREAK_TO_DEBUGGER

device		acpi
options		IOMMU
device		pci
device		uart
device		loop
device		ether
device		bpf

# LinuxKPI requires firmware
device		firmware

# System console
device		vt
device		vt_efifb
device		kbdmux
options		EVDEV_SUPPORT
options		KBD_INSTALL_CDEV
# evdev has to be in the kernel when EVDEV_SUPPORT is set or the build fails
device		evdev

# Xen domU support
options		XENHVM
device		xenefi
device		xenpci
device		xentimer
