# LF kernel for generic ARM systems.

cpu		ARM64
ident		LF

include "../../conf/std.nodebug"
include "../../conf/std.lf"

makeoptions	DEBUG=-g		# Build kernel with gdb(1) debug symbols
#makeoptions	WITH_CTF=1		# Run ctfconvert(1) for DTrace support

options 	EFIRT			# EFI Runtime Services support
options 	KBD_INSTALL_CDEV	# install a CDEV entry in /dev
options 	HWPMC_HOOKS		# Necessary kernel hooks for hwpmc(4)
options 	VFP			# Floating-point support
options 	LINUX_BOOT_ABI		# Boot using booti command from U-Boot
options 	PERTHREAD_SSP		# Per-thread SSP canary

# Bus drivers
device		pci
options 	PCI_HP			# PCI-Express native HotPlug
options 	PCI_IOV			# PCI SR-IOV support

# CPU frequency control
device		cpufreq

# Block devices
device		scbus
device		da

# ATA/SCSI peripherals
device		cd			# CD
device		pass			# Passthrough device (direct ATA/SCSI access)

#device		nvme			# base NVMe driver
options 	NVME_USE_NVD=0		# prefer the cam(4) based nda(4) driver
#device		nvd			# expose NVMe namespaces as disks, depends on nvme

# GPIO / PINCTRL
device		gpio
device		gpioled
device		fdt_pinctrl
device		gpioregulator

# I2C
#device		iicbus
#device		iicmux
#device		iic
#device		icee			# Generic IIC eeprom

# Crypto accelerators
#device		armv8crypto		# ARMv8 OpenCrypto module

# SPI
device		spibus

# PWM
device		pwm

# Serial (COM) ports
device		uart			# Generic UART driver

# Console
device		vt
device		kbdmux

device		vt_efifb
device		vt_simplefb

# Pseudo devices.
device		crypto			# core crypto support
device		armv8_rng		# Armv8.5 rndr RNG
device		loop			# Network loopback
device		ether			# Ethernet support
device		firmware		# firmware assist module
device		clk
device		phy
device		hwreset
device		nvmem
device		regulator
device		syscon

device		bpf		# Berkeley packet filter

device		netmap			# netmap(4) support

# USB support
options 	USB_HOST_ALIGN=64	# Align usb buffers to cache line size.
#device		ohci			# OHCI USB interface
#device		uhci			# UHCI USB interface
#device		ehci			# EHCI USB interface (USB 2.0)
device		xhci			# XHCI USB interface (USB 3.0)
device		usb			# USB Bus (required)
#device		ukbd			# Keyboard
#device		umass			# Disks/Mass storage - Requires scbus and da

# HID support
#options 	HID_DEBUG		# enable debug msgs
#device		hid			# Generic HID support

# Firmware
device		mmio_sram		# Generic on-chip SRAM

options 	SOC_APPLE_T8103
#options 	IOMMU
options 	FDT

#device		pci_n1sdp		# ARM Neoverse N1 SDP PCI
device		pl061			# Arm PL061 GPIO controller
device		pl031			# Arm PL031 RTC
device		pl011
device		scmi			# System Control Management Interface
device		arm_doorbell		# ARM Message Handling Unit (MHU)
options 	FDT
device		acpi
device		acpi_ged

# SoC support
options 	SOC_BRCM_BCM2837
options 	SOC_BRCM_BCM2838
options 	SOC_BRCM_NS2
device		bcm2835_bsc		# Broadcom BCM283x I2C bus
device		bcm2835_spi		# Broadcom BCM283x SPI bus
device		uart_mu			# RPI3 aux port
device		dwcotg
device		sdhci
makeoptions	MODULES_EXTRA+="dtb/rpi"

options 	MMCCAM
#options 	CAMDEBUG

nodevice	mmc
nodevice	mmcsd

# Net80211 debugging
#nooptions	IEEE80211_DEBUG

# USB debugging
#nooptions	USB_DEBUG
#nooptions	HID_DEBUG

# CAM debugging
#nooptions	CAMDEBUG
#nooptions	CAM_DEBUG_FLAGS

device		iicbus
device		mdio
